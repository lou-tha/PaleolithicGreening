# File:    main.R
# Author:  Florian Linsel, Louise Tharandt
#############################################
#libraries
library(tidyverse)
library(dplyr)
library(purrr)
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
source("../VegPer_R_Scripts/Calc21Day.R")
source("../VegPer_R_Scripts/CalcStepsStandardised.R")
source("../VegPer_R_Scripts/CalcFilter.R")
source("../VegPer_R_Scripts/plot_2x2.R")
#############################################
# set workspace
setwd("../../") #reference inside of the github / working directory folder
getwd()
# File:    main.R
# Author:  Florian Linsel, Louise Tharandt
#############################################
#libraries
library(tidyverse)
library(dplyr)
library(purrr)
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
source("../VegPer_R_Scripts/Calc21Day.R")
source("../VegPer_R_Scripts/CalcStepsStandardised.R")
source("../VegPer_R_Scripts/CalcFilter.R")
source("../VegPer_R_Scripts/plot_2x2.R")
#############################################
# set workspace
setwd("../../../") #reference inside of the github / working directory folder
getwd()
# File:    main.R
# Author:  Florian Linsel, Louise Tharandt
#############################################
#libraries
library(tidyverse)
library(dplyr)
library(purrr)
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
source("../VegPer_R_Scripts/Calc21Day.R")
source("../VegPer_R_Scripts/CalcStepsStandardised.R")
source("../VegPer_R_Scripts/CalcFilter.R")
source("../VegPer_R_Scripts/plot_2x2.R")
#############################################
# set workspace
setwd("../") #reference inside of the github / working directory folder
getwd()
# File:    main.R
# Author:  Florian Linsel, Louise Tharandt
#############################################
#libraries
library(tidyverse)
library(dplyr)
library(purrr)
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
source("../VegPer_R_Scripts/Calc21Day.R")
source("../VegPer_R_Scripts/CalcStepsStandardised.R")
source("../VegPer_R_Scripts/CalcFilter.R")
source("../VegPer_R_Scripts/plot_2x2.R")
#############################################
# set workspace
setwd("../") #reference inside of the github / working directory folder
# global parameter:
parameter <- c("BlackSea" ,"NGRIP", "LGM") #name of the period data sets
# create new directories and folders for the results
for (p in parameter){
dir.create(file.path(paste0('VegPer_Results/')), showWarnings = FALSE)
dir.create(file.path(paste0('VegPer_Results/Calc_Step_Results/Calc_Step_',p)), showWarnings = FALSE)
dir.create(file.path(paste0('VegPer_Results/21Day_',p,'_Results')), showWarnings = FALSE)
dir.create(file.path(paste0('VegPer_Results/Filter_Results')), showWarnings = FALSE)
dir.create(file.path(paste0('VegPer_Results/Filter_Results/Filter_Results_',p)), showWarnings = FALSE)
dir.create(file.path(paste0('VegPer_Results/Filter_Results/Filter_Results_',p,'/nodes')), showWarnings = FALSE)
}
# input files
# LGM base data that will be used to add factors to get the temperature data of stadial and interstadial periods
LGM <- read.csv("VegPer_Base_Data/LGM_base_data.csv", header = T,  fileEncoding="UTF-8-BOM")
# list of stadial and interstadial climatic periods of interest
period <- c("GS-3", "GI-3", "GS-4", "GI-4", "GS-5.1", "GI-5.1", "GS-5.2", "GI-5.2",
"GS-6", "GI-6", "GS-7", "GI-7", "GS-8", "GI-8", "GS-9", "GI-9")
##############################################
# Calc21Day.R
# list of months
month <- c(1:12)
lapply(parameter,DAY_21,period,month) # function to calculate the 21 day average of all periods and data sets
##############################################
# CalcStepsStandardised.R
#list of parameters needed for step-function
step_day_size <- c(2,7,14,21,28)
#list of coordinates
step_list <- c(20, 60, 47.5, 65, 2.5)
# set workspace and folders for results
setwd("VegPer_Results/")
lapply (parameter,stepfunction,period,step_day_size) # function to calculate the steps between each coordinate node of all periods and data sets
##############################################
# CalcFilter.R
setwd("../")
setwd("VegPer_Results/")
df_result_result <- data.frame()
lapply (parameter,VegPer_Results,period,df_result_result) # function to filter the calculated results of all periods and data sets
############################################################################################
# create the plots with Python and QGIS
##############################################
# plot_2x2
period_concat <- list(list("GS-3", "GI-3"),list("GS-4", "GI-4"), list("GS-5.1", "GI-5.1"),list("GS-5.2", "GI-5.2"),
list("GS-6", "GI-6"),list("GS-7", "GI-7"), list("GS-8", "GI-8"),    list("GS-9", "GI-9"))
setwd("extdata")
lapply (parameter,plot_2x2,period_concat)
# Python
library(reticulate)
use_python("C:/Program Files/QGIS 3.10/apps/Python37")
#C:\Program Files\GDAL
Sys.setenv(RETICULATE_PYTHON = "C:/Program Files/QGIS 3.10/apps/Python37")
getwd()
setwd("VegPer_QGIS/")
reticulate::py_discover_config(required_module = "gdal")
source_python("Froot_Loops_QGIS_3.py")
# File:    main.R
# Author:  Florian Linsel, Louise Tharandt
#############################################
#libraries
library(tidyverse)
library(dplyr)
library(purrr)
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
source("../VegPer_R_Scripts/Calc21Day.R")
source("../VegPer_R_Scripts/CalcStepsStandardised.R")
source("../VegPer_R_Scripts/CalcFilter.R")
source("../VegPer_R_Scripts/plot_2x2.R")
#############################################
# set workspace
setwd("../") #reference inside of the github / working directory folder
##############################################
# CalcStepsStandardised.R
#list of coordinates
step_list <- c(20, 60, 47.5, 65, 2.5)
#list of parameters needed for step-function
step_day_size <- c(2,7,14,21,28)
# set workspace and folders for results
setwd("VegPer_Results/")
lapply (parameter,stepfunction,period,step_day_size) # function to calculate the steps between each coordinate node of all periods and data sets
##############################################
# CalcFilter.R
setwd("../")
setwd("VegPer_Results/")
df_result_result <- data.frame()
lapply (parameter,VegPer_Results,period,df_result_result) # function to filter the calculated results of all periods and data sets
############################################################################################
# create the plots with Python and QGIS
##############################################
# plot_2x2
period_concat <- list(list("GS-3", "GI-3"),list("GS-4", "GI-4"), list("GS-5.1", "GI-5.1"),list("GS-5.2", "GI-5.2"),
list("GS-6", "GI-6"),list("GS-7", "GI-7"), list("GS-8", "GI-8"),    list("GS-9", "GI-9"))
setwd("../")
setwd("VegPer_QGIS/extdata")
lapply (parameter,plot_2x2,period_concat)
# Python
library(reticulate)
use_python("C:/Program Files/QGIS 3.10/apps/Python37")
#C:\Program Files\GDAL
Sys.setenv(RETICULATE_PYTHON = "C:/Program Files/QGIS 3.10/apps/Python37")
getwd()
setwd("../")
setwd("VegPer_QGIS/")
reticulate::py_discover_config(required_module = "gdal")
source_python("Froot_Loops_QGIS_3.py")
